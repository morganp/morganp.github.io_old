
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>RockPaperScissors</title>
  <meta name="author" content="Morgan Prior">

  
  <meta name="description" content="I think it is good practise to create a read only tag when releasing an application. This allows you to create a branch from it at any time or a bug &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://morganp.github.io/blog/page/22">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="RockPaperScissors" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-47010631-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RockPaperScissors</a></h1>
  
    <h2>LizardSpock</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:morganp.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Latest</a></li>
  <li><a href="/blog/archives">All</a></li>
  <li><a href="/tag">Tags</a></li>
  <li><a href="/license">License</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/tagging-a-git-repo-for-a-release-/">Tagging a Git Repo for a Release</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-18T04:07:46+00:00" pubdate data-updated="true">Dec 18<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/tagging-a-git-repo-for-a-release-/#disqus_thread"
             data-disqus-identifier="http://morganp.github.io/blog/tech/tagging-a-git-repo-for-a-release-/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I think it is good practise to create a read only tag when releasing an application. This allows you to create a branch from it at any time or a bug fix with out worrying about accidentally mixing in new features from your latest code base.</p>

<h1>Git Tagging</h1>

<p>Lists current tags:</p>

<pre><code>$ git tag 
</code></pre>

<p>Create tag named gem-0.1.0, code to match the gem 0.1.0 release.</p>

<pre><code>$ git tag gem-0.1.0 
</code></pre>

<p>Push named tag to the remote repo:</p>

<pre><code>$ git push origin gem-0.1.0
</code></pre>

<p>Push all tags to repo:</p>

<pre><code>$ git push --tags
</code></pre>

<p>A very good book covering topics like this and many others <a href="https://www.amazon.co.uk/dp/1934356727?tag=morgue-21&amp;camp=2902&amp;creative=19466&amp;linkCode=as4&amp;creativeASIN=1934356727&amp;adid=0C6PBKZXSP31YKZF8BFS&amp;">Pragmatic Guide to Git </a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/fixing-ncursers-on-os-x-1063%2b/">Fixing Ncursers on OS X 10.6.3+</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-13T13:59:47+00:00" pubdate data-updated="true">Dec 13<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/fixing-ncursers-on-os-x-1063%2b/#disqus_thread"
             data-disqus-identifier="http://morganp.github.io/blog/tech/fixing-ncursers-on-os-x-1063%2b/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Currently OS X 10.6.3 &ndash; 10.6.5 the ncursers library is broken. A hacky fix is to copy the libraries from 10.6.2. I have put my working copies in a public drop box.</p>

<pre><code>$ sudo cp /usr/lib/libncurses.5.dylib /usr/lib/libncurses.5.dylib.backup
$ sudo cp /usr/lib/libncurses.5.4.dylib /usr/lib/libncurses.5.4.dylib.backup

$ cd /usr/lib/
$ sudo wget http://dl.dropbox.com/u/8462176/osx-10-6-working-ncurse/libncurses.5.dylib
$ sudo wget http://dl.dropbox.com/u/8462176/osx-10-6-working-ncurse/libncurses.5.4.dylib
</code></pre>

<p>Wget can be installed with <a href="https://github.com/mxcl/homebrew">homebrew</a>:</p>

<pre><code>$ brew install wget
</code></pre>

<p>The Ideas for the fix came from <a href="http://www.uponmyshoulder.com/blog/2010/os-x-10-6-3-broke-ncurses/">source</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/mac-os-x-libsystem-cache-out-of-sync/">Mac OS X libSystem Cache Out of Sync</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-13T11:52:06+00:00" pubdate data-updated="true">Dec 13<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/mac-os-x-libsystem-cache-out-of-sync/#disqus_thread"
             data-disqus-identifier="http://morganp.github.io/blog/tech/mac-os-x-libsystem-cache-out-of-sync/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For various reasons Mac OS X (at least 10.6) can get the system cache out of sync with the libraries on disk. The error you should might see is:</p>

<pre><code>&gt; dyld: shared cached file was build against a different libSystem.dylib, ignoring cache
</code></pre>

<p>From <a href="http://blog.sensibleopensource.com/what_is_dyld_and_how_to_clear_the_shared_cache.htm">Source</a>, to fix it run:</p>

<pre><code>$ sudo update_dyld_shared_cache -force
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/put-methods-not-working-with-classy-sinatra-apps/">Put Methods Not Working With Classy Sinatra Apps</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-11T05:38:06+00:00" pubdate data-updated="true">Dec 11<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/put-methods-not-working-with-classy-sinatra-apps/#disqus_thread"
             data-disqus-identifier="http://morganp.github.io/blog/tech/put-methods-not-working-with-classy-sinatra-apps/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Since moving to Classy Sinatra applications I have not been able to get put and delete methods to work correctly. This is because sinatra/base does not include the rack method override &lsquo;stuff&rsquo;.</p>

<pre><code>require 'rubygems'
require 'sinatra/base'
module MyModule
  class MyApp &lt; Sinatra::Base
    use Rack::MethodOverride ##&lt;-- Required for put delete

    get '/' do
    '&lt;form method="post" action="/"&gt;' + 
    '  &lt;input  type="hidden" name="_method" value="put" /&gt;' +
    '  &lt;button type="submit"&gt; Test PUT&lt;/button&gt;&lt;br  /&gt;' +
    '&lt;/form&gt;'
    end

    put '/' do
      'PUT works'
    end
  end
end

if $0 == __FILE__
  MyModule::MyApp.run!
end
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/rake-aborted%21-undefined-method-%60info-for-nilnilclass/">Rake Aborted! Undefined Method `info&#8217; for nil:NilClass</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-04T11:24:05+00:00" pubdate data-updated="true">Nov 4<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/rake-aborted%21-undefined-method-%60info-for-nilnilclass/#disqus_thread"
             data-disqus-identifier="http://morganp.github.io/blog/tech/rake-aborted%21-undefined-method-%60info-for-nilnilclass/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I am currently switching between runing migrations locally on an sqlite3 database and postgres for production on Heroku.</p>

<p>When switching back to a local sqlite3 I got this error when running the migration.</p>

<pre><code>$ rake db:migrate

(in /Users/path/to/top/level)
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:migrate
rake aborted!
undefined method `info' for nil:NilClass
</code></pre>

<p>The error I found through <a href="http://stackoverflow.com/questions/1719212/undefined-method-info-for-nilnilclass-when-running-active-record-migration">Stackoverflow</a> was that I had not defined a logger.</p>

<p>My rakefile.rb for sinatra applications to run activerecord migrations.</p>

<pre><code>require 'rubygems'
require 'rake'
require 'active_record'

namespace :db do
  desc "Migrate the database through scripts in db/migrate. Target specific version with VERSION=x"
  task :migrate =&gt; :environment do
    ActiveRecord::Migrator.migrate('db/migrate', ENV["VERSION"] ? ENV["VERSION"].to_i : nil )
  end
end

task :environment do
  ActiveRecord::Base.establish_connection(
    :adapter =&gt; 'sqlite3',
    :database =&gt; 'db/local.db'
  )
  ActiveRecord::Base.logger = Logger.new(File.open('database.log', 'a'))

 # ActiveRecord::Base.establish_connection(
 #     :adapter  =&gt; 'postgresql',
 #     :host     =&gt; 'host',
 #     :username =&gt; 'user',
 #     :password =&gt; 'pass',
 #     :database =&gt; 'db'
 # )

end
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/sinatra-heroku-and-configru/">Sinatra Heroku and config.ru</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-03T16:43:22+00:00" pubdate data-updated="true">Nov 3<span>rd</span>, 2010</time>
        
           | <a href="/blog/tech/sinatra-heroku-and-configru/#disqus_thread"
             data-disqus-identifier="http://morganp.github.io/blog/tech/sinatra-heroku-and-configru/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Rack applications often require a config.ru for deployment. The standard config.ru for classic sinatra applications is well documented:</p>

<pre><code>require 'app'
run Sinatra::Application
</code></pre>

<p>The requirments for classy apps is not very well documented, currently I use this on heroku:</p>

<pre><code>#For Ruby 1.8.7 (the 1.9.2 version should also work) on Heroku
require 'app'
run MyModule::MyApp
</code></pre>

<p>After trying Ruby 1.9.2 I had to add ./ to my app require. The current directory has been removed from the load path adding ./ removes the problem because it explicitly defines the path.</p>

<pre><code>#For Ruby 1.9.2 on Heroku
require './app'
run MyModule::MyApp
</code></pre>

<p>For a sinatra Application which may look like:</p>

<pre><code>require 'sinatra/base'
module MyModule
  class MyApp &lt; Sinatra::Base
    get '/' do
      'HelloWorld!'
    end
  end
end

#if file called directly launch app (ie ruby my_app.rb)
if $0 == __FILE__
  MyModule::MyApp.run!
end
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/sinatra-session-extension/">Sinatra Session Extension</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-02T12:49:03+00:00" pubdate data-updated="true">Nov 2<span>nd</span>, 2010</time>
        
           | <a href="/blog/tech/sinatra-session-extension/#disqus_thread"
             data-disqus-identifier="http://morganp.github.io/blog/tech/sinatra-session-extension/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have just started to use a <a href="http://www.sinatrarb.com/extensions.html">sinatra extensions</a> called <a href="http://mjijackson.com/sinatra-session/">Sinatra Session</a>. The write up on the <a href="http://mjijackson.com/sinatra-session/">main site</a> is pretty good and only include a short summary below.</p>

<pre><code>gem install sinatra-session
</code></pre>

<p>In your app (classy style)</p>

<pre><code>require 'sinatra/base'
require 'sinatra/session'

class MyApp &lt; Sinatra::Base
  register Sinatra::Session

  # Use helpers as required
  get '/' do
    session_start!
    session[:foo] ||= 'bar'

    #now view helper, etc, can call session[:foo] to get value 'bar'
  end

end
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/sinatra-reload-source-file-changes-in-development-mode/">Sinatra Reload Source File Changes in Development Mode</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-02T11:03:26+00:00" pubdate data-updated="true">Nov 2<span>nd</span>, 2010</time>
        
           | <a href="/blog/tech/sinatra-reload-source-file-changes-in-development-mode/#disqus_thread"
             data-disqus-identifier="http://morganp.github.io/blog/tech/sinatra-reload-source-file-changes-in-development-mode/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://github.com/rkh/sinatra-reloader">Sinatra Reloader</a> is a sinatra extension which reloads source files while in development mode, this functionality was removed from base sinatra in 0.9.2</p>

<pre><code>gem install sinatra-reloader
</code></pre>

<p>In your app (classy style)</p>

<pre><code>require "sinatra/base"
require "sinatra/reloader"

class Foo &lt; Sinatra::Base
  configure(:development) do
    register Sinatra::Reloader
    also_reload "models/*.rb"
    also_reload "helpers/*.rb"
    #dont_reload "lib/**/*.rb"
  end
end
</code></pre>

<p><a href="http://github.com/rkh/sinatra-reloader">Source</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/os-x-open-finder-from-command-line/">OS X Open Finder From Command Line</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-13T11:08:40+01:00" pubdate data-updated="true">Oct 13<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/os-x-open-finder-from-command-line/#disqus_thread"
             data-disqus-identifier="http://morganp.github.io/blog/tech/os-x-open-finder-from-command-line/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Just discovered this: from <a href="http://grx.no/kb/2009/01/09/open-finder-for-current-directory-from-command-line/">source</a>.</p>

<pre><code>$ open .
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/stopstart-and-restart-samba-on-os-x/">Stop/Start and Restart Samba on OS X</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-10T10:13:52+01:00" pubdate data-updated="true">Oct 10<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/stopstart-and-restart-samba-on-os-x/#disqus_thread"
             data-disqus-identifier="http://morganp.github.io/blog/tech/stopstart-and-restart-samba-on-os-x/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>To Stop Start and Restart Samba on Mac OS X 10.6:</p>

<pre><code>sudo /usr/sbin/smbd stop
sudo /usr/sbin/smbd start
sudo /usr/sbin/smbd restart
</code></pre>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/23/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/21/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/cooking'>Cooking (11)</a></li><li><a href='/blog/engineering'>Engineering (14)</a></li><li><a href='/blog/garden'>Garden (11)</a></li><li><a href='/blog/home'>Home (4)</a></li><li><a href='/blog/photography'>Photography (31)</a></li><li><a href='/blog/tech'>Tech (221)</a></li></ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/tech/macbook-keyboard-light-not-working/">Macbook Keyboard Light Not Working</a>
      </li>
    
      <li class="post">
        <a href="/blog/tech/git-tag-and-push-to-github/">Git Tag and Push to Github</a>
      </li>
    
      <li class="post">
        <a href="/blog/engineering/beyond-the-lsb/">Beyond the LSB</a>
      </li>
    
      <li class="post">
        <a href="/blog/cooking/spicy-choclate-cake/">Spicy Choclate Cake</a>
      </li>
    
      <li class="post">
        <a href="/blog/engineering/matlab-function-outputs/">Matlab Function Outputs</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/morganp">@morganp</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'morganp',
            count: 1,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Morgan Prior -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'morganpgithubio';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
