
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>RockPaperScissors</title>
  <meta name="author" content="Morgan Prior">

  
  <meta name="description" content="I have just finished some minor updates to the site. The largest is the move to Droid Fonts, Google Fonts provides a way for free cross platform &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://lizard-spock.co.uk/blog/page/26">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="RockPaperScissors" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-47010631-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RockPaperScissors</a></h1>
  
    <h2>LizardSpock</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:lizard-spock.co.uk" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Latest</a></li>
  <li><a href="/blog/archives">All</a></li>
  <li><a href="/tag">Tags</a></li>
  <li><a href="/license">License</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/amaras-site-updates/">Amaras Site Updates</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-28T13:19:09+00:00" pubdate data-updated="true">Feb 28<span>th</span>, 2011</time>
        
           | <a href="/blog/tech/amaras-site-updates/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/amaras-site-updates/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have just finished some minor updates to the site. The largest is the move to Droid Fonts, <a href="http://www.google.com/webfonts">Google Fonts</a> provides a way for free cross platform fonts to be used. <a href="http://www.fontsquirrel.com/">Font Squirrel</a> is also meant to be a good alternative.</p>

<p>The link colours have also been changed around and dropped the underline. The graduated colour in the header is now a repeated image instead of css as the original method of the graduation forced a horizontal scroll bar.</p>

<p>Articles can now be filtered by tag <a href="/article/tag/Ruby">/tag/Ruby</a>, and the <a href="/article/rss">RSS</a> works again.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/ormactiverecord-or-ruby-sort/">ORM(Activerecord) or Ruby Sort</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-20T02:19:17+00:00" pubdate data-updated="true">Feb 20<span>th</span>, 2011</time>
        
           | <a href="/blog/tech/ormactiverecord-or-ruby-sort/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/ormactiverecord-or-ruby-sort/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Based on an <a href="http://amaras-tech.co.uk/people/morgan/article/18">old Article</a> I wrote, investigating incase sensitive sorting performance.</p>

<p>I have an active record model call Tag with tag and id properties, it contains 3000 randomly chosen and sorted words.</p>

<h3>My Summary of results:</h3>


<p>
Average time for ORM (Activerecord) to return results 0.1928<br/>
Average time for ORM to return sorted results 0.1290 (0.0638 quicker!)<br/>
Ruby to sort (non-case sensitive) results 0.0138<br/>
Ruby to sort pre-sorted* results 0.0606 (4.4 times slower!)</p>

<p>*Pre-sorted is case sensitive</p>

<p>More investigation is require, results could be effected by caching at the ORM/DB layer, but returning sorted results appears quicker than unsorted. and sorting in ruby is 4.4 times slower with pre sorted data.</p>

<p>The test:</p>

<pre><code>#For Benchmarking 
require 'benchmark'
include Benchmark

bm(10) do |b|
       b.report("ORM") {        @tags = Tag.find(:all) }
       b.report("Sort by") {    @tags = @tags.sort_by { |tag| tag.tag.downcase }  }
       b.report("ORM sorted") { @tags = Tag.find(:all, :order =&gt; "tag") }
       b.report("Sort by") {    @tags = @tags.sort_by { |tag| tag.tag.downcase }  }
  end

  puts "same test but presorted after ruby sort"
  bm(10) do |b|
       b.report("ORM sorted") { @tags = Tag.find(:all, :order =&gt; "tag") }
       b.report("Sort by") {    @tags = @tags.sort_by { |tag| tag.tag.downcase }  }
       b.report("ORM") {        @tags = Tag.find(:all) }
       b.report("Sort by") {    @tags = @tags.sort_by { |tag| tag.tag.downcase }  }
 end
</code></pre>

<p>The results collated: ORM returning unsorted results</p>

<pre><code>            user     system      total        real
ORM         0.200000   0.010000   0.210000 (  0.216162)
ORM         0.160000   0.000000   0.160000 (  0.171810)
ORM         0.200000   0.020000   0.220000 (  0.215265)
ORM         0.160000   0.000000   0.160000 (  0.167882)
ORM         0.200000   0.020000   0.220000 (  0.216648)
ORM         0.170000   0.000000   0.170000 (  0.169064)
</code></pre>

<p>Full ruby sort</p>

<pre><code>Sort by     0.010000   0.000000   0.010000 (  0.014169)
Sort by     0.020000   0.000000   0.020000 (  0.012673)
Sort by     0.010000   0.000000   0.010000 (  0.014791)
Sort by     0.010000   0.000000   0.010000 (  0.012934)
Sort by     0.020000   0.000000   0.020000 (  0.014387)
Sort by     0.010000   0.000000   0.010000 (  0.013655)
</code></pre>

<p>Case-sensitive ORM sorting</p>

<pre><code>ORM sorted  0.110000   0.000000   0.110000 (  0.138993)
ORM sorted  0.100000   0.010000   0.110000 (  0.135767)
ORM sorted  0.110000   0.000000   0.110000 (  0.132612)
ORM sorted  0.100000   0.000000   0.100000 (  0.150029)
ORM sorted  0.100000   0.000000   0.100000 (  0.108307)
ORM sorted  0.100000   0.000000   0.100000 (  0.108133)
</code></pre>

<p>Ruby sorting pre-sorted results</p>

<pre><code>Sort by     0.080000   0.000000   0.080000 (  0.132228)
Sort by     0.020000   0.000000   0.020000 (  0.015885)
Sort by     0.090000   0.000000   0.090000 (  0.102128)
Sort by     0.010000   0.000000   0.010000 (  0.014791)
Sort by     0.090000   0.000000   0.090000 (  0.086072)
Sort by     0.010000   0.000000   0.010000 (  0.012341)
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/photography/beginning-astro-photography/">Beginning Astro Photography</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-19T23:34:17+00:00" pubdate data-updated="true">Feb 19<span>th</span>, 2011</time>
        
           | <a href="/blog/photography/beginning-astro-photography/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/photography/beginning-astro-photography/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>None of this has been tried yet but from various sources I have created this list:</p>

<p>Once you have telescope the next task will be finding objects in the sky.<br/>
Book: <a href="https://www.amazon.co.uk/dp/0521781906?tag=morgue-21&amp;camp=2902&amp;creative=19466&amp;linkCode=as4&amp;creativeASIN=0521781906&amp;adid=0T095V4ZAX026FDZPXPG&amp;">Turn left at Orion</a> seems to get good reviews and is recommend on several sites.<br/>
Software: <a href="http://www.stellarium.org/">Stellarium</a> is free software for most major OS platforms. This will create maps of the sky.</p>

<p>To start Capturing images with a DSLR you will need a t-ring (about £15), this connects to you DSLR instead of a lens. This gives you a t-thread. Some telescopes like skywatcher dobsoians offer a direct connection (t-ring to telescope) others will require a t-adaper which will be 2&#8221; or 1.25&#8221; to a t-thread.</p>

<pre><code>t-ring:    DSLR     -&gt; t-thread (manufacturer specifc)
t-adapter: t-thread -&gt; 2" or 1.25" eyepiece
t-adapter may not be required if telescope offers direct connection.
</code></pre>

<p>Digital cameras tend to suffer from noise during long exposures, image stacking is a technique using multiple images added together to give good exposure while avoiding long exposure noise. <a href="https://www.amazon.co.uk/dp/B003N7O3CI?tag=morgue-21&amp;camp=2902&amp;creative=19466&amp;linkCode=as4&amp;creativeASIN=B003N7O3CI&amp;adid=0NP2Z411SY7PT8G7G8WH&amp;">Lightroom</a> is my favourite image management/editing toll and image stack is possible with the <a href="http://www.photographers-toolbox.com/products/lrenfuse.php">Enfuse</a> plug-in.</p>

<p>The <a href="http://stargazerslounge.com/">Stargazers Lounge</a> looks like a good forum for asking questions and reading beginner articles.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/activerecord-find-allmultiple/">Activerecord Find All/Multiple</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-19T06:31:03+00:00" pubdate data-updated="true">Feb 19<span>th</span>, 2011</time>
        
           | <a href="/blog/tech/activerecord-find-allmultiple/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/activerecord-find-allmultiple/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Using Tags (An active record model) to find tags by the tag property:</p>

<pre><code>Tag.find_by_tag("Ruby")
Ruby

Tag.find_by_tag(["Ruby", "Gem"])
Ruby
</code></pre>

<p> That did not return what I expected, find<em> returns one object by default. first</em> last<em> or all</em> modifiers can be used. So to find multiple tags by the same property:</p>

<pre><code>Tag.find_all_by_tag(["Ruby", "Gem"]) 
Ruby
Gem
</code></pre>

<p>Again with slightly less active record magic:<br/>
Note the = ? for singular items and IN (?) for a list of items.</p>

<pre><code>Tag.find(:all, :conditions =&gt; ["tag = ?", "Ruby"])
Ruby

Tag.find(:all, :conditions =&gt; ["tag IN (?)", ["Ruby", "Gem"]])
Ruby
Gem
</code></pre>

<p>More info can be read on <a href="http://lenary.co.uk/guides/active_record_querying.html#dynamic-finders">Rails Guides</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/gem-permissions-on-webfaction/">Gem Permissions on WebFaction</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-12T14:10:56+00:00" pubdate data-updated="true">Feb 12<span>th</span>, 2011</time>
        
           | <a href="/blog/tech/gem-permissions-on-webfaction/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/gem-permissions-on-webfaction/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After making a few updates to my site I decided to upgrade the version of sinatra I was using in my web faction account. for some reason I started getting these errors:</p>

<pre><code>$ gem update sinatra
Updating installed gems
Updating sinatra
ERROR:  While executing gem ... (Gem::FilePermissionError)
    You don't have write permissions into the /usr/local/ruby1.8.7ee/lib/ruby/gems/1.8 directory.
</code></pre>

<p>This error was resolved by adding this line to my ~/.gemrc file (create it if it does not exist)</p>

<pre><code> gemhome: /home/webfaction-username/.gem/ruby/1.8
</code></pre>

<p>The results of gem env before and after fix:</p>

<pre><code>$ ./gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.3.7
  - RUBY VERSION: 1.8.7 (2009-12-24 patchlevel 248) [i686-linux]
  - INSTALLATION DIRECTORY: /usr/local/ruby1.8.7ee/lib/ruby/gems/1.8
  - RUBY EXECUTABLE: /usr/local/ruby1.8.7ee/bin/ruby
  - EXECUTABLE DIRECTORY: /usr/local/ruby1.8.7ee/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-linux
  - GEM PATHS:
     - /usr/local/ruby1.8.7ee/lib/ruby/gems/1.8
     - /home/webfaction-user/.gem/ruby/1.8
  - GEM CONFIGURATION:
     - :update_sources =&gt; true
     - :verbose =&gt; true
     - :benchmark =&gt; false
     - :backtrace =&gt; false
     - :bulk_threshold =&gt; 1000
     - :sources =&gt; ["http://rubygems.org", "http://gems.github.com"]
     - "gem" =&gt; "--no-ri --no-rdoc"
  - REMOTE SOURCES:
     - http://rubygems.org
     - http://gems.github.com
</code></pre>

<p>After fix</p>

<pre><code>$ ~/webapps/passenger/gems/bin/gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.3.7
  - RUBY VERSION: 1.8.7 (2009-12-24 patchlevel 248) [i686-linux]
  - INSTALLATION DIRECTORY: /home/webfaction-user/.gem/ruby/1.8
  - RUBY EXECUTABLE: /usr/local/ruby1.8.7ee/bin/ruby
  - EXECUTABLE DIRECTORY: /home/webfaction-user/.gem/ruby/1.8/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-linux
  - GEM PATHS:
     - /home/webfaction-user/.gem/ruby/1.8
     - /usr/local/ruby1.8.7ee/lib/ruby/gems/1.8
  - GEM CONFIGURATION:
     - :update_sources =&gt; true
     - :verbose =&gt; true
     - :benchmark =&gt; false
     - :backtrace =&gt; false
     - :bulk_threshold =&gt; 1000
     - :sources =&gt; ["http://rubygems.org", "http://gems.github.com"]
     - "gem" =&gt; "--no-ri --no-rdoc"
     - "gemhome" =&gt; "/home/webfaction-user/.gem/ruby/1.8"
  - REMOTE SOURCES:
     - http://rubygems.org
     - http://gems.github.com
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/sinatra-regex-routes/">Sinatra Regex Routes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-12T06:41:10+00:00" pubdate data-updated="true">Feb 12<span>th</span>, 2011</time>
        
           | <a href="/blog/tech/sinatra-regex-routes/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/sinatra-regex-routes/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The routes for my site have been growing since adding pagination (/articles/older/) and tag filtering. As well as the small amount of logic for each route was getting duplicated.</p>

<p>I have been experimenting with real regex routes, so far some thing like this looks like it could be a good solution:</p>

<pre><code>$items_per_page = 10
get /^\/article(\/older(\/\d+)?)?(\/tag\/\w*)?\/?$/ do |pagination, page, tag|

if pagination.nil?
   @offset = 0
  else
    if page.nil?
      @offset = $items_per_page
    else
      @offset = page.gsub(/^\//, "").to_i
  end

  if not tag.nil?
   tag.gsub!(/\/tag\//, "")
  end

  result = "Pagination #{@offset} &lt;br  /&gt;"
  result &lt;&lt; "Tag #{tag} &lt;br  /&gt;"
  result &lt;&lt; "captures #{ params[:captures] }"
  return result 
end
</code></pre>

<p>This means the following routes will be handled:<br/>
/article<br/>
/article/<br/>
/article/older/<br/>
/article/older/10<br/>
/article/tag/Ruby<br/>
/article/older/10/tag/Ruby<br/>
/article/older/tag/Ruby</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/mac-mini-mid-2010-8gb-memory-upgrade/">Mac Mini (Mid 2010) 8GB Memory Upgrade</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-02T08:30:24+00:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2011</time>
        
           | <a href="/blog/tech/mac-mini-mid-2010-8gb-memory-upgrade/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/mac-mini-mid-2010-8gb-memory-upgrade/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Finally got my mac mini to accept the 8GB kit I bought from <a href="http://www.crucial.com/uk/">Crucial</a> for £74 (apple upgrade is £409).</p>

<p>The Mac mini since mid 2010 has been designed to have user upgradable
 memory. I however ran in to some issues with it not recognising the new memory, not quite which step fixed it:</p>

<p>First reboot, while switching back on press and hold cmd-opt-p-r <a href="http://support.apple.com/kb/ht1379">Resetting PRAM and NVRAM</a>. This will causes it to continuously reboot, switch off after a cylce not letting it boot up.</p>

<p>Second, Disconnect all cables, open up the back and take the old memory out. pulling the clips to the side the memory pops up at about 45degrees.</p>

<p>Third, insert lower memory, really make sure this is firmly in place by pushing in firmly while at 45-30Degeees,then press down to clip into place. non of the metal from the contacts should be showing. I think this was my main mistake when inserting this memory the first few times. Then insert the second RMA module in the higher position, this seats much easier.</p>

<p>Fourth, Replace back/bottom of mac mini then hold the power button down/in for 4 seconds. This causes a <a href="http://support.apple.com/kb/HT3964">SMC reset</a>.</p>

<p>Last reconnect cables and power up. You can use /Applications/Utilities/Activity Monitor.app to check how much memory you now have.</p>

<p>If the mac just beeps, it is quite likely that the memory is not seated correctly. On a very rare occasion it would be due to a faulty memory chip. They should work one at a time in the top position though so you could test them that way.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/my-backup-strategy/">My Backup Strategy</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-18T10:25:12+00:00" pubdate data-updated="true">Jan 18<span>th</span>, 2011</time>
        
           | <a href="/blog/tech/my-backup-strategy/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/my-backup-strategy/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Considering various raid strategies I decided that Raid 5 would be too limiting and have previously found raid striping systems to be too unreliable. I decided to have a bunch of disks (JBOD if you will) directly connected to a machine. At some point in the future I would like a merged view of the drives, potentially through a fuse file system or a soft linking script.</p>

<p>To protect against hardware failures, firmware updates etc I back up to a server running a different OS, instead of any raid mirroring. My mac mini backups to a headless Ubunutu. This has a power advantage that the backup drives are powered down most of the time.</p>

<p>Whenever I add a drive to the main server I add at least the same size to the backup server. I then run rsync to back each drive up.</p>

<pre><code>$ REMOTE_IP=192.168.0.2
$ rsync -av --ignore-errors --delete --exclude '.Trashes' --exclude '.Spotlight-V100' --exclude '.DS_Store' /Volumes/Drive1/ $REMOTE_IP:/mnt/backup/drive1/
</code></pre>

<p>For some reason once it was scripted up it stopped deleting files from the backup drive adding the &lsquo;&mdash;ignore-errors&rsquo; fixed this issue.</p>

<p>The other small gotcha that I ran into was that by default ext3 drives reserve 5% of the space for root. This is so that the main drive does not get so full it stops to function correctly and root can not get in to fix things. I am not sure how useful it is on non-root drives. This had the consequence that when backing up a nearly full drive it would not fit in to the back up drive. NB: 5% of a 2TB drive is 100GB, which is quite a lot of space.</p>

<p>To reset the amount of reserved space I used (for 0%):</p>

<pre><code>$ sudo tune2fs -m 0 /dev/sda1
</code></pre>

<p>My full backup script</p>

<pre><code>#!/bin/bash
ARCHIVE_SERVER="192.168.0.2"

disk[0]="/Volumes/disk1/ $ARCHIVE_SERVER:/mnt/archive_server/disk1/"
disk[1]="/Volumes/disk2/ $ARCHIVE_SERVER:/mnt/archive_server/disk2/"
disk[2]="/Volumes/disk3/ $ARCHIVE_SERVER:/mnt/archive_server/disk3/"

for backup in "${disk[@]}"
do
  #Split in to $1 and $2
  set -- $backup
  if [ -d $1 ]
  then 
    rsync -av --ignore-errors --delete --exclude '.Trashes'   \
--exclude '.Spotlight-V100' --exclude '.DS_Store' $1 $2
  else
    echo "Drive offline $1 (Not Backed Up)"
  fi
done
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/screen-x-not-connecting-when-running-as-an-other-user/">Screen -x Not Connecting When Running as an Other User</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-30T13:06:42+00:00" pubdate data-updated="true">Dec 30<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/screen-x-not-connecting-when-running-as-an-other-user/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/screen-x-not-connecting-when-running-as-an-other-user/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have been running into issues with screen when switching to another user:</p>

<pre><code>$ su otheruser
&gt; password
$ screen -x
&gt; Cannot open your terminal '/dev/ttys002' - please check.
</code></pre>

<p>From <a href="http://www.linuxquestions.org/questions/linux-general-1/problem-using-screen-cannot-open-your-terminal-dev-pts-0-please-check-338313/">this post</a> I have discovered that it was due to a permissions issue.</p>

<pre><code>$ ls -l /dev/ttys002
&gt; crw--w----  1 user  tty   16,   2 Dec 30 23:34 /dev/ttys002
</code></pre>

<p>To fix I had to set other permissions.</p>

<pre><code>$ su otheruser
$ sudo chmod go+wr /dev/ttys002
</code></pre>

<p>You still have to su to the owners account and therefore it is still secure. ie user can not just connect to a /dev/ttys002 currently in use by otheruser.</p>

<pre><code> #As user, otheruser currently using /dev/ttys002
 $ screen -x /dev/ttys002
&gt; Must run suid root for multiuser support. 
</code></pre>

<p>The issue has kept recurring and I have had to reset the permissions every time I wanted to connect. This could be Mac OS X specific but I edited the root crontab to fix.</p>

<pre><code>$ sudo crontab -e
# Added the text below
# MIN   HOUR   MDAY  MON  DOW   COMMAND 
  0,15,30,45 * * * * chmod o+wr /dev/ttys000
  0,15,30,45 * * * * chmod o+wr /dev/ttys001
  0,15,30,45 * * * * chmod o+wr /dev/ttys002
  0,15,30,45 * * * * chmod o+wr /dev/ttys003
  0,15,30,45 * * * * chmod o+wr /dev/ttys004
  0,15,30,45 * * * * chmod o+wr /dev/ttys005
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/ruby-block-selection-in-vim-plugin/">Ruby Block Selection in Vim (Plugin)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-28T22:42:03+00:00" pubdate data-updated="true">Dec 28<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/ruby-block-selection-in-vim-plugin/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/ruby-block-selection-in-vim-plugin/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A new very cool plugin for Rubyists using Vim. <a href="http://vimcasts.org/blog/2010/12/a-text-object-for-ruby-blocks/">RubyBlock</a> TextObjects created by <a href="http://drewneil.com/">Drew Neil</a> from <a href="http://vimcasts.org/">Vimcasts.org</a>. Once installed it will add the commands var, vir, sr &amp; ir for selecting Ruby blocks, Drew Neil has explained it well on <a href="http://vimcasts.org/blog/2010/12/a-text-object-for-ruby-blocks/">VimCasts</a>.
This vim plugin relies on two others <a href="http://www.vim.org/scripts/script.php?script_id=39">matchit.vim</a> and <a href="http://www.vim.org/scripts/script.php?script_id=2100">textobj-user</a>. I believe that <a href="http://www.vim.org/scripts/script.php?script_id=39">matchit.vim</a> is built in to current builds of vim and only requires enabling by adding the following to you .vimrc file:</p>

<pre><code>runtime macros/matchit.vim    
</code></pre>

<p>If it is not built in to your build or you want the latest you can get a zip file from the <a href="http://www.vim.org/scripts/script.php?script_id=39">vim scripts</a> Uncompress it and put matchit.vim into your vim/plugin folder and matchit.txt in to your vim/doc. these are typically ~/.vim/plugin ~/.vim/doc but can be any where on thr $VIMRUNTIME, I redefine mine ot a github repo via (in .vimrc):</p>

<pre><code>set runtimepath=$HOME/.unix_config/vim,$VIMRUNTIME
</code></pre>

<p>To add the new help files to vim help you run (using the path to you vim help files):</p>

<pre><code>:helptags ~/.vim/doc
</code></pre>

<p>Next, <a href="http://www.vim.org/scripts/script.php?script_id=2100">textobj-user</a> plugin which is a generic wrapper for text objects and provides no added vim functionality by itself. Installation of this plugin confused me as the zip file and github all had make files and I do not like having to compile my plugins. However after uncompressing the zip file I moved the contents of the autoload folder to vim/autoload and contents of the docs folder to vim/docs, the RubyBlock plugin seems to work so I assume that this is all that is required.</p>

<p>Drew Neil has distributed his plugin as a vimball (*.vba) which is the simplest to install way of distributing vim plugins. Download file from <a href="http://www.vim.org/scripts/script.php?script_id=3382">vim scripts</a>. Open the file with vim and  then :source %</p>

<pre><code>$ vim ~/Downloads/textobj-rubyblock.vba
:source %
</code></pre>

<p>Now open a ruby file move to a line inside a block and start trying out your new commands: var, vir, ar &amp; ir.</p>

<p>Thanks to <a href="http://drewneil.com/">Drew Neil</a> of <a href="http://vimcasts.org/">Vimcasts.org</a> for creating this plugin.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/27/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/25/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/cooking'>Cooking (11)</a></li><li><a href='/blog/engineering'>Engineering (36)</a></li><li><a href='/blog/garden'>Garden (14)</a></li><li><a href='/blog/home'>Home (5)</a></li><li><a href='/blog/outdoor'>Outdoor (1)</a></li><li><a href='/blog/photography'>Photography (37)</a></li><li><a href='/blog/tech'>Tech (240)</a></li></ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/photography/f-stop-loka-and-tripod/">F-Stop Loka &amp; Tripod</a>
      </li>
    
      <li class="post">
        <a href="/blog/tech/word-word-the-difference/">Word WORD the Difference</a>
      </li>
    
      <li class="post">
        <a href="/blog/tech/list-files-ignored-by-git/">List Files Ignored by Git</a>
      </li>
    
      <li class="post">
        <a href="/blog/tech/xkill/">Xkill</a>
      </li>
    
      <li class="post">
        <a href="/blog/engineering/submit-to-sge-as-if-working-locally/">Submit to SGE as if Working Locally</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/morganp">@morganp</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'morganp',
            count: 1,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Morgan Prior -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'morganpgithubio';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
