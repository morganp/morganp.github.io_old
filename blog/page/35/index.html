
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>RockPaperScissors</title>
  <meta name="author" content="Morgan Prior">

  
  <meta name="description" content="A simple Sinatra web app to upload a single file. Also available as a gist, based on http://pastie.caboo.se/134681 require 'rubygems'
require ' &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://lizard-spock.co.uk/blog/page/35">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="RockPaperScissors" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-47010631-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RockPaperScissors</a></h1>
  
    <h2>LizardSpock</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:lizard-spock.co.uk" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Latest</a></li>
  <li><a href="/blog/archives">All</a></li>
  <li><a href="/tag">Tags</a></li>
  <li><a href="/license">License</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/sinatra-file-upload/">Sinatra File Upload</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-05-01T07:54:03+01:00" pubdate data-updated="true">May 1<span>st</span>, 2010</time>
        
           | <a href="/blog/tech/sinatra-file-upload/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/sinatra-file-upload/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A simple Sinatra web app to upload a single file. Also available as a <a href="http://gist.github.com/386495">gist</a>, based on <a href="http://pastie.caboo.se/134681">http://pastie.caboo.se/134681</a></p>

<pre><code>require 'rubygems'
require 'sinatra'

get '/upload' do
   erb '&lt;form action="upload" method="post" enctype="multipart/form-data" accept-charset="utf-8"&gt;
   &lt;input type="file" name="uploaded_data" id="uploaded_data"&gt;
   &lt;p&gt;&lt;input type="submit" value="Continue"&gt;&lt;/p&gt;
   &lt;/form&gt;'
end

post '/upload' do
   FileUtils.mkdir_p('./Uploads/')
   FileUtils.mv(params[:uploaded_data][:tempfile].path, "./Uploads/#{params[:uploaded_data][:filename]}")
   erb 'Upload Complete'
end
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/webfaction-new-user-with-access-to-their-own-site/">Webfaction New User with Access to Their Own Site</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-28T09:24:58+01:00" pubdate data-updated="true">Apr 28<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/webfaction-new-user-with-access-to-their-own-site/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/webfaction-new-user-with-access-to-their-own-site/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>With <a href="http://www.webfaction.com/?affiliate=morgy">Webfaction</a> you can create new users with there own home area but there is no straight forward way to host their site.</p>

<p>There is a posted method where the site is hosted in YOUR home/webapps directory, but that requires you reset your permissions every time you create a new site and if you forget there could be a security hole.</p>

<p>Hosting the site in THEIR home directory requires you to set permissions in there directory so YOU can see it. This is much safer if all goes wrong the site does not have permission to be displayed rather than compromising your new site.</p>

<p>Create new user with bash login via with <a href="http://panel.webfaction.com">Web interface</a></p>

<p>set password, as this can be tricky getting a random string a cheat is to do:</p>

<pre><code>echo "some random string" | md5
</code></pre>

<p>Choose 8 or more characters for the password.</p>

<p>SSH login as normal</p>

<pre><code>ssh user@user.webfactional.com
</code></pre>

<p>then</p>

<pre><code>su new_user
cd ~
mkdir myweb.com
</code></pre>

<p>then set</p>

<pre><code>setfacl -m u:nginx:rx ~
setfacl -R -m u:nginx:rx myweb.com/

setfacl -m u:apache:rx ~
setfacl -R -m u:apache:rx myweb.com/

setfacl -m u:Your_Username:rx ~
setfacl -R -m u:Your_Username:rx myweb.com/
</code></pre>

<p>Back to <a href="http://www.webfaction.com/?affiliate=morgy">webfaction</a> main control panel and create a new app ( symbolic link to PHP/static )</p>

<p>The info section for this needs to be:
/home/new_user/myweb.com</p>

<p>NB: currently only works with apache not nginx</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/ruby-ruby-ruby-why-are-you-so-wierd-at-times/">Ruby, Ruby, Ruby, Why Are You So Wierd at Times?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-26T07:48:47+01:00" pubdate data-updated="true">Apr 26<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/ruby-ruby-ruby-why-are-you-so-wierd-at-times/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/ruby-ruby-ruby-why-are-you-so-wierd-at-times/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This feature of ruby keeps catching me out as the behaviour is quite unexpected (by me).</p>

<p>I can use a &lsquo;!&rsquo; modifying function like so:</p>

<pre><code>html_string.gsub!("&lt;pre&gt;","&lt;pre class=\"prettyprint\"&gt;")
</code></pre>

<p>Which works great apart from when the match string &ldquo;&lt;pre&gt;&rdquo; in this case is not found then it returns nil. Surely I would want the string unaltered instead, why would I want nil. So I generally have to replace it with the following:</p>

<pre><code>html_string = html_string.gsub("&lt;pre&gt;","&lt;pre class=\"prettyprint\"&gt;")
</code></pre>

<p>[Update 27/04/2010]</p>

<p>Turns out it should not modify the the string but the function returns nil. This was the last line in a function call and so was an implicit return. The following would probably have been better:</p>

<pre><code>html_string.gsub!("&lt;pre&gt;","&lt;pre class=\"prettyprint\"&gt;")
return html_string
</code></pre>

<p>The returned nil could then be used as an if statment to take a different execution path if not modified:</p>

<pre><code>if /&lt;pre&gt;/ === html_string
   html_string = html_string.gsub("&lt;pre&gt;","&lt;pre class=\"prettyprint\"&gt;")
else
   puts "Does not contain &lt;pre&gt;"
end
</code></pre>

<p>Could just become:</p>

<pre><code>if not html_string.gsub!("&lt;pre&gt;","&lt;pre class=\"prettyprint\"&gt;")
   puts "Does not contain &lt;pre&gt;"
end
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/testing-tweets-from-production-server-this-should-be-working%21/">Testing Tweets from Production Server This Should Be Working!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-18T13:45:45+01:00" pubdate data-updated="true">Apr 18<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/testing-tweets-from-production-server-this-should-be-working%21/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/testing-tweets-from-production-server-this-should-be-working%21/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/ruby-incase-sensitive-sort/">Ruby Incase Sensitive Sort</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-18T11:13:51+01:00" pubdate data-updated="true">Apr 18<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/ruby-incase-sensitive-sort/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/ruby-incase-sensitive-sort/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Ruby has a .sort method which sorts basic objects. it is case sensitive though so Zebra is before apple. Using sort_by instead you can specify the sort key.</p>

<pre><code>some_array.sort_by { |x| x.downcase }
</code></pre>

<p>There is a good description/discussion of the performance issues of this on <a href="http://ruby-doc.org/core/classes/Enumerable.html#M003120">ruby-docs</a></p>

<p>Since the <a href="http://ruby-doc.org/core/classes/Enumerable.html#M003120">ruby-docs</a> mention performance issues I though it would be worth noting  that in my blog app I have the option to pre sort with the ORM. this shouldmake the ruby sory much faster to execute as it is already mostly sorted, but how does this effect the performance of the ORM</p>

<pre><code>def all_tags_sort
   @tags = Tags.find(:all, :order =&gt; "tag")
   @tags = @tags.sort_by { |tag| tag.tag.downcase }
end
</code></pre>

<p>VS</p>

<pre><code>def all_tags_sort
   @tags = Tags.find(:all)
   @tags = @tags.sort_by { |tag| tag.tag.downcase }
end
</code></pre>

<p>For the performance test I added this to one of views that displays the tags</p>

<pre><code>#For Benchmarking
require 'benchmark'
include Benchmark

bm(10) do |b|
   b.report("ORM") { @tags = Tags.find(:all) }
   b.report("Sort by") { @tags = @tags.sort_by { |tag| tag.tag.downcase }  }
   b.report("ORM sorted") { @tags = Tags.find(:all, :order =&gt; "tag") }
   b.report("Sort by") { @tags = @tags.sort_by { |tag| tag.tag.downcase }  }
end
</code></pre>

<p>To test I built up a small dictionary using this <a href="http://gist.github.com/370533">gist</a> (sorted by default so have to randomise it alittle bit)</p>

<pre><code>                   user     system      total        real
ORM           53.920000   3.650000  57.570000 ( 57.960210)
Sort by        4.750000   0.320000   5.070000 (  5.091083)
ORM sorted    45.080000   3.590000  48.670000 ( 49.554891)
Sort by        2.700000   0.310000   3.010000 (  3.016042)
</code></pre>

<p>mmm, data does not look write as retrieving and sorting was quicker than just retrieving will run with the order swapped.</p>

<pre><code>                user     system      total        real
ORM sorted 10.290000   1.740000  12.030000 ( 12.087005)
Sort by     0.930000   0.130000   1.060000 (  1.054450)
ORM        11.740000   1.700000  13.440000 ( 13.453623)
Sort by     0.760000   0.130000   0.890000 (  0.886095)
</code></pre>

<p>Sorting in the ORM layer still seems to be quicker than not sorting, and the Ruby sorting takes same length of time. So looks like applying the sort is a worthwhile.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/itunes-play-flac-on-os-x/">iTunes Play FLAC on OS X</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-18T07:33:36+01:00" pubdate data-updated="true">Apr 18<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/itunes-play-flac-on-os-x/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/itunes-play-flac-on-os-x/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://code.google.com/p/flukeformac/">Fluke for mac</a> can be used to get iTunes playing <a href="http://flac.sourceforge.net/">FLAC</a> audio files. However it is currently broken for Snow Leopard due to the upgraded version of python.</p>

<p>Once Fluke is installed open your .flac files with fluke.app and they should be added to your iTunes library.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/ruby-and-gemspec/">Ruby and Gemspec</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-16T10:01:58+01:00" pubdate data-updated="true">Apr 16<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/ruby-and-gemspec/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/ruby-and-gemspec/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have just forked and cloned a project on github and discovered *.gemspec files. They are a nice way of specifying the gem dependencies in your project. once you have the copied/cloned a project before you run it just call:</p>

<pre><code>$ gem build something.gemspec
</code></pre>

<p>The <a href="http://docs.rubygems.org/read/chapter/20">gemspec documentation</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/ruby-nil-tests-fail-you-really-want-/">Ruby .nil? Tests Fail ? You Really Want ||=</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-15T07:43:50+01:00" pubdate data-updated="true">Apr 15<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/ruby-nil-tests-fail-you-really-want-/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/ruby-nil-tests-fail-you-really-want-/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I recently discovered ||= in ruby. Its main use is for initialising a variable if it does not already exists, this is great for extending templates with new functions and maintaining backwards compatibility.</p>

<pre><code>irb(main):001:0&gt; x 
NameError: undefined local variable or method `x' for main:Object
from (irb):1
irb(main):002:0&gt; x ||= 0
=&gt; 0
irb(main):003:0&gt; x = 10
=&gt; 10
irb(main):004:0&gt; x ||= 0
=&gt; 10
</code></pre>

<p>I previously used :</p>

<pre><code>if @x.nil? 
    @x = 10   
end
</code></pre>

<p>which is 3 times as many lines of code and does not work with all variable types infact .nil? is only valid for global ($) and instance (@) variables.</p>

<pre><code>irb(main):001:0&gt; $x.nil?
=&gt; true
irb(main):002:0&gt; @x.nil?
=&gt; true
irb(main):003:0&gt; @@x.nil?
NameError: uninitialized class variable @@x in Object
   from (irb):3
irb(main):004:0&gt; x.nil?
NameError: undefined local variable or method `x' for main:Object
   from (irb):4
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/installing-the-ruby-gem-twitter-on-webfaction/">Installing the Ruby Gem Twitter on Webfaction</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-12T10:33:21+01:00" pubdate data-updated="true">Apr 12<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/installing-the-ruby-gem-twitter-on-webfaction/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/installing-the-ruby-gem-twitter-on-webfaction/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>[Update]<br/>
As this is a long post I am putting this update at the top. If you just want to install gems that require a newer version of RubyGems please see the comments at the bottom. I was originally using the wrong gem binary, I should have cd into the webapps directory and found the ruby ee gem was actually uptodate.</p>

<p>[Original]</p>

<p>I have been playing with the <a href="http://twitter.com/amarastech">twitter</a> api via the gem <a href="http://twitter.rubyforge.org/">twitter</a>. This worked fine with my local development version but ran into a few problems when trying to run it on my <a href="http://www.webfaction.com?affiliate=morgy">webfaction</a> production site. The main problem with <a href="http://www.webfaction.com?affiliate=morgy">webfaction</a> is that they have not upgraded the gem to the latest version. To get a version I am allowed to upgrade requires me to install/compile a version of ruby.
Since I was installing it I have decided to go with Ruby 1.9, NB: I still had to upgrade gem afterwards.</p>

<p>This is the how I worked through installing it.</p>

<pre><code>$ gem install twitter
&gt; ERROR:  Error installing twitter:
&gt;      oauth requires RubyGems version &gt; 1.3.1
&gt; Updating class cache with 1488 classes...
</code></pre>

<p>Make list of current gems as will need to reinstall</p>

<pre><code>$ cd ~/bin
$ gem list
</code></pre>

<p>Save output of gems and location and version of ruby</p>

<pre><code>$ ruby --version &gt; old_ruby_webfaction.txt
$ which ruby &gt;&gt; old_ruby_webfaction.txt
$ gem env &gt;&gt; old_ruby_webfaction.txt
$ gem list &gt;&gt; old_ruby_webfaction.txt
</code></pre>

<p>Download ruby tar and unpack</p>

<pre><code>$ wget ftp://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.1-p376.tar.gz    
$ tar -xzf ruby-1.9.1-p376.tar.gz
$ rm ruby-1.9.1-p376.tar.gz
</code></pre>

<p>Compile / Install Ruby to ~/bin (for all the configure options you can run ./configure &mdash;help)</p>

<pre><code>$ cd ruby-1.9.1-p376 
$ ./configure --prefix=$HOME
$ make
$ make test
$ make install
</code></pre>

<p>Check new version of ruby is picked up</p>

<pre><code>$ ruby --version
&gt; ruby 1.9.1p376 (2009-12-07 revision 26041) [i686-linux]
</code></pre>

<p>if not paths are incorrect, this is in my ~/.bashrc</p>

<pre><code>PATH=$HOME/bin:$PATH
export PATH
</code></pre>

<p>Clean up, this directory will be nealry 200 MBs</p>

<pre><code>$ rm -rf ~/bin/ruby-1.9.1-p376
</code></pre>

<p>I mentioned this earlier gem 1.3.1 is still the default with ruby 1.9</p>

<pre><code>$ gem --version 
&gt; 1.3.1
</code></pre>

<p>We will now have permission to upgrade it.</p>

<pre><code>$ gem install rubygems-update
$ gem update --system

$ gem --version
&gt; 1.3.6
</code></pre>

<p>Now back to the original problem installing the twitter gem</p>

<pre><code>$ gem install twitter
</code></pre>

<p>Seems to be working.</p>

<p>Now review old_ruby_webfaction.txt</p>

<pre><code>$ cd ~/bin
$ cat old_ruby_webfaction.txt
</code></pre>

<p>Install all the gems you require (gem install x)</p>

<p>Once you have the site up and running on ruby 1.9 you may wish to remove the gems from the old location to save disk space.
For me the default location of gems was ~/.gem/ruby/1.8 but the command gem env should have saved it in to your old_ruby_webfaction.txt.</p>

<p>Since this install of ruby is entirely writeable by you the default location is probably being used for me this is &lsquo;~/lib/ruby/gems/1.9.1&rsquo; but again gem env should tell you the default location.</p>

<p>Passenger is the web service that runs Sinatra and Rails applications, we now need it to use our version of ruby.</p>

<pre><code>$ pwd
/home/username/webapps/passenger/gems/bin
$ ll

lrwxrwxrwx  1 morgy morgy  30 Mar 13 12:37 erb -&gt; /usr/local/ruby1.8.7ee/bin/erb
lrwxrwxrwx  1 morgy morgy  30 Mar 13 12:37 gem -&gt; /usr/local/ruby1.8.7ee/bin/gem
lrwxrwxrwx  1 morgy morgy  30 Mar 13 12:37 irb -&gt; /usr/local/ruby1.8.7ee/bin/irb
-rwxr-xr-x+ 1 morgy morgy 409 Mar 13 12:37 passenger-config
-rwxr-xr-x+ 1 morgy morgy 425 Mar 13 12:37 passenger-install-apache2-module
-rwxr-xr-x+ 1 morgy morgy 423 Mar 13 12:37 passenger-install-nginx-module
-rwxr-xr-x+ 1 morgy morgy 419 Mar 13 12:37 passenger-make-enterprisey
-rwxr-xr-x+ 1 morgy morgy 415 Mar 13 12:37 passenger-memory-stats
-rwxr-xr-x+ 1 morgy morgy 415 Mar 13 12:37 passenger-spawn-server
-rwxr-xr-x+ 1 morgy morgy 409 Mar 13 12:37 passenger-status
-rwxr-xr-x+ 1 morgy morgy 414 Mar 13 12:37 passenger-stress-test
-rwxr-xr-x+ 1 morgy morgy 384 Mar 13 12:36 rackup
-rwxr-xr-x+ 1 morgy morgy 382 Mar 13 12:36 rake
lrwxrwxrwx  1 morgy morgy  31 Mar 13 12:37 rdoc -&gt; /usr/local/ruby1.8.7ee/bin/rdoc
lrwxrwxrwx  1 morgy morgy  38 Mar 13 12:37 ree-version -&gt; /usr/local/ruby1.8.7ee/bin/ree-version
-rwxr-xr-x+ 1 morgy morgy  92 Mar 13 12:37 restart
lrwxrwxrwx  1 morgy morgy  29 Mar 13 12:37 ri -&gt; /usr/local/ruby1.8.7ee/bin/ri
lrwxrwxrwx  1 morgy morgy  31 Mar 13 12:37 ruby -&gt; /usr/local/ruby1.8.7ee/bin/ruby
-rwxr-xr-x+ 1 morgy morgy 144 Mar 13 12:37 start
-rwxr-xr-x+ 1 morgy morgy 130 Mar 13 12:37 stop
lrwxrwxrwx  1 morgy morgy  33 Mar 13 12:37 testrb -&gt; /usr/local/ruby1.8.7ee/bin/testrb
</code></pre>

<p>Now implement the move to the new version of ruby with the new gems</p>

<pre><code>$ mv erb erb_old
$ ln -s /home/`whoami`/bin/erb erb
$ mv gem gem_old
$ ln -s /home/`whoami`/bin/gem gem
$ mv irb irb_old
$ ln -s /home/`whoami`/bin/irb irb
$ mv rdoc rdoc_old 
$ ln -s /home/`whoami`/bin/rdoc rdoc
$ mv ri ri_old
$ ln -s /home/`whoami`/bin/ri ri
$ mv ruby ruby_old
$ ln -s /home/`whoami`/bin/ruby ruby 
$ mv testrb testrb_old
$ ln -s /home/`whoami`/bin/testrb testrb
</code></pre>

<p>Restart server</p>

<pre><code>$ ~/webapps/passenger/restart
</code></pre>

<p>Deploy you web app using twitter gam and everything should be working!</p>

<h1>Summary</h1>

<p>Install local Ruby 1.9<br/>
Upgrade new gem from 1.3.1 to 1.3.6<br/>
Install required gems<br/>
Change Ruby/Gem version used by Passenger for Sinatra and Rails Web apps</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/tech/gem-install-with-out-the-docs/">Gem Install with Out the Docs</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-10T14:11:26+01:00" pubdate data-updated="true">Apr 10<span>th</span>, 2010</time>
        
           | <a href="/blog/tech/gem-install-with-out-the-docs/#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk/blog/tech/gem-install-with-out-the-docs/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When I install gems on my server I do not get any of the documentation which is normally 3-5 times larger than the gem itself. Installing gems with out docs can be done via</p>

<pre><code>$ gem install --no-ri --no-rdoc gem_name 
</code></pre>

<p>Based this <a href="http://bparanj.blogspot.com/2008/11/how-to-install-gem-without-rdoc-or-ri.html">blog post</a> I have created a ~/.gemrc so that it does the no docs automatically.</p>

<pre><code>:update_sources: true
:bulk_threshold: 1000
:sources: 
- http://rubygems.org
- http://gems.github.com
gem: --no-ri --no-rdoc
:verbose: true
:benchmark: false
:backtrace: false
</code></pre>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/36/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/34/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/cooking'>Cooking (12)</a></li><li><a href='/blog/engineering'>Engineering (45)</a></li><li><a href='/blog/garden'>Garden (19)</a></li><li><a href='/blog/home'>Home (5)</a></li><li><a href='/blog/outdoor'>Outdoor (1)</a></li><li><a href='/blog/photography'>Photography (37)</a></li><li><a href='/blog/tech'>Tech (244)</a></li></ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/garden/japanesegarden/">JapaneseGarden</a>
      </li>
    
      <li class="post">
        <a href="/blog/garden/potting-bench/">Potting Bench</a>
      </li>
    
      <li class="post">
        <a href="/blog/garden/self-watering-propagator/">Self Watering Propagator</a>
      </li>
    
      <li class="post">
        <a href="/blog/garden/planter/">Planter</a>
      </li>
    
      <li class="post">
        <a href="/blog/engineering/matlab-linear-progressions/">Matlab: Linear Progressions</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/morganp">@morganp</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'morganp',
            count: 1,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Morgan Prior -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'morganpgithubio';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
