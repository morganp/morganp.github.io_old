
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Benchmarking Ruby, Explicit vs Implicit Returns - RockPaperScissors</title>
  <meta name="author" content="Morgan Prior">

  
  <meta name="description" content="Back in 2009 barkingiguana wrote about how explicit returns 'return "String"' was slower than an implicit return, ie just letting the last value get &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://morganp.github.io/blog/tech/benchmarking-ruby-explicit-vs-implicit-returns">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="RockPaperScissors" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-47010631-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RockPaperScissors</a></h1>
  
    <h2>LizardSpock</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:morganp.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Latest</a></li>
  <li><a href="/blog/archives">All</a></li>
  <li><a href="/tag">Tags</a></li>
  <li><a href="/license">License</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Benchmarking Ruby, Explicit vs Implicit Returns</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-26T09:12:29+01:00" pubdate data-updated="true">Oct 26<span>th</span>, 2011</time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://morganp.github.io">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Back in 2009 <a href="http://barkingiguana.com/2009/11/11/returning-explicitly-is-slower/">barkingiguana</a> wrote about how explicit returns <code>'return "String"'</code> was slower than an implicit return, ie just letting the last value get returned. The test was performed on ruby 1.8.6 and I thought I would just check with ruby 1.9.2-p290 to see if this still held true.</p>

<p>The test I ran:</p>

<pre><code>require 'benchmark'

def explicit
  return "TEST"
end

def implicit
  "TEST"
end

def explicit_non_eval
  return 'TEST'
end

def implicit_non_eval
  'TEST'
end

def explicit_symbol
  return :TEST
end

def implicit_symbol
  :TEST
end

n = 100_000_000
Benchmark.bmbm do |x|
  x.report("Explicit \"\"     return") { n.times { explicit } }
  x.report("Implicit \"\"     return") { n.times { implicit } }
  x.report("Explicit ''     return") { n.times { explicit_non_eval } }
  x.report("Implicit ''     return") { n.times { implicit_non_eval } }
  x.report("Explicit symbol return") { n.times { explicit_symbol   } }
  x.report("Implicit symbol return") { n.times { implicit_symbol   } }
end
</code></pre>

<p>the results</p>

<pre><code>Rehearsal ----------------------------------------------------------
Explicit ""     return  37.810000   0.000000  37.810000 ( 37.889241)
Implicit ""     return  36.300000   0.000000  36.300000 ( 36.310153)
Explicit ''     return  36.460000   0.000000  36.460000 ( 36.476939)
Implicit ''     return  36.520000   0.010000  36.530000 ( 36.541361)
Explicit symbol return  14.330000   0.000000  14.330000 ( 14.352004)
Implicit symbol return  14.330000   0.000000  14.330000 ( 14.322934)
----------------------------------------------- total: 175.760000sec

                             user     system      total        real
Explicit ""     return  37.620000   0.000000  37.620000 ( 37.680337)
Implicit ""     return  36.480000   0.000000  36.480000 ( 36.504694)
Explicit ''     return  36.560000   0.000000  36.560000 ( 36.574798)
Implicit ''     return  36.100000   0.010000  36.110000 ( 36.111328)
Explicit symbol return  14.770000   0.000000  14.770000 ( 14.812874)
Implicit symbol return  14.710000   0.000000  14.710000 ( 14.829556)
</code></pre>

<p>For me the difference I see in the results between implicit and explicit returns is negligible. I also prefer the explicit return in all but the simplest of methods, as it is much easier to see what value gets returned and at which point the programmer want the method to exit. It also helps to minimize the side effects of re-factoring.</p>

<p><a href="http://barkingiguana.com/2009/11/11/returning-explicitly-is-slower/">Barkingiguana</a> seems to prefer the implicit style which is possibly more idiomatic ruby, but I personally find that it adds ambiguity to the code for beginners to intermediate rubyists.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Morgan Prior</span></span>

      








  


<time datetime="2011-10-26T09:12:29+01:00" pubdate data-updated="true">Oct 26<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='/blog/tech/'>Tech</a>
  
</span>


      

<span class="tags">
  
    <a class='tag' href='/tag/programming/'>Programming</a>, <a class='tag' href='/tag/ruby/'>Ruby</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://morganp.github.io/blog/tech/benchmarking-ruby-explicit-vs-implicit-returns/" data-via="" data-counturl="http://morganp.github.io/blog/tech/benchmarking-ruby-explicit-vs-implicit-returns/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/tech/tagging-a-git-repo-and-pushing-tag-to-github/" title="Previous Post: Tagging a git repo and pushing tag to github">&laquo; Tagging a git repo and pushing tag to github</a>
      
      
        <a class="basic-alignment right" href="/blog/tech/setting-ruby-defaults-vs-fetch/" title="Next Post: Setting Ruby Defaults '||' vs 'fetch(){}'">Setting Ruby Defaults '||' vs 'fetch(){}' &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/cooking'>Cooking (11)</a></li><li><a href='/blog/engineering'>Engineering (14)</a></li><li><a href='/blog/garden'>Garden (11)</a></li><li><a href='/blog/home'>Home (4)</a></li><li><a href='/blog/photography'>Photography (31)</a></li><li><a href='/blog/tech'>Tech (220)</a></li></ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/tech/git-tag-and-push-to-github/">Git Tag and Push to Github</a>
      </li>
    
      <li class="post">
        <a href="/blog/engineering/beyond-the-lsb/">Beyond the LSB</a>
      </li>
    
      <li class="post">
        <a href="/blog/cooking/spicy-choclate-cake/">Spicy Choclate Cake</a>
      </li>
    
      <li class="post">
        <a href="/blog/engineering/matlab-function-outputs/">Matlab Function Outputs</a>
      </li>
    
      <li class="post">
        <a href="/blog/tech/bash-string-manipulation/">Bash String Manipulation</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/morganp">@morganp</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'morganp',
            count: 1,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Morgan Prior -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'morganpgithubio';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://morganp.github.io/blog/tech/benchmarking-ruby-explicit-vs-implicit-returns/';
        var disqus_url = 'http://morganp.github.io/blog/tech/benchmarking-ruby-explicit-vs-implicit-returns/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
