<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Tech | RockPaperScissors]]></title>
  <link href="http://lizard-spock.co.uk/blog/tech/atom.xml" rel="self"/>
  <link href="http://lizard-spock.co.uk/"/>
  <updated>2014-04-14T19:14:51+01:00</updated>
  <id>http://lizard-spock.co.uk/</id>
  <author>
    <name><![CDATA[Morgan Prior]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Ruby Methods and Splat]]></title>
    <link href="http://lizard-spock.co.uk/blog/tech/ruby-methods-and-splat/"/>
    <updated>2014-04-09T19:47:47+01:00</updated>
    <id>http://lizard-spock.co.uk/blog/tech/ruby-methods-and-splat</id>
    <content type="html"><![CDATA[<p>Ruby methods can set default values for optional arguments:</p>

<pre><code>def commit(path=Dir.pwd)
</code></pre>

<p>To take an optional number of arguments a splat can be used:</p>

<pre><code>def amethod( *arg1 )
</code></pre>

<p>The Problem is now to set defaults or require a set number of arguments.</p>

<ol>
<li>Splat arguments can not be defaulted.</li>
<li>The splat can accept zero arguments.</li>
</ol>


<p>The following might be what you would expect for a default in a splat, but this conflicts with its abilliy to accept 0 arguments.</p>

<pre><code>def commit(*path=[Dir.pwd]) ##THIS DOES NOT WORK
</code></pre>

<p>Splats can follow other arguments. To require at least one argument:</p>

<pre><code>def add(files, *files_splat)
</code></pre>

<p>No arguments required but the first has a default:</p>

<pre><code>def commit(path=Dir.pwd, *path_splat)
</code></pre>

<p>These also work as expected in Thor for parsing command line options. I have used them in my <a href="https://github.com/morganp/dssx">dssx</a> gem.</p>

<p>In thor I also add this to the start of my methods to combine <code>path</code> and <code>path_splat</code> which are strings:</p>

<pre><code>path_list = path + ' ' + path_splat * ' '
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Thor Adding --verbose]]></title>
    <link href="http://lizard-spock.co.uk/blog/tech/thor-adding-verbose/"/>
    <updated>2014-04-09T19:26:44+01:00</updated>
    <id>http://lizard-spock.co.uk/blog/tech/thor-adding-verbose</id>
    <content type="html"><![CDATA[<p>With a command line Ruby application using Thor for the option parsing I want to be able to run:</p>

<pre><code>$ thor_app --version
&gt; thor_app version 1.0.0
</code></pre>

<p>Create a boolean class option, which does not belong to a task, that can be referenced by other tasks. The often used example for a class option is -v verbose, as all tasks can use this to determine how noisy they should be.</p>

<p>Then create a &lsquo;version&rsquo; task and make it the default task, so when no task is defined the version task is ran and can react to the &mdash;version flag (class option).</p>

<pre><code>class CLI &lt; Thor
  #include Thor::Actions
  class_option :version, :type =&gt; :boolean

  desc "version", "Show thor_app version"
  def version
    if options[:version]
      puts "thor_app version #{find_version}"
    end
  end
  default_task :version

  no_tasks do
    def find_version
      ## Method can be replaced to look up VERSION
      '1.0.0'
    end
  end
end
</code></pre>

<p>This is based on <a href="http://stackoverflow.com/q/22809972/97073">my SO Question</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Creating Lightroom Metadata Views]]></title>
    <link href="http://lizard-spock.co.uk/blog/tech/photography/creating-lightroom-metadata-views/"/>
    <updated>2014-04-09T01:28:27+01:00</updated>
    <id>http://lizard-spock.co.uk/blog/tech/photography/creating-lightroom-metadata-views</id>
    <content type="html"><![CDATA[<p>Lightroom plugins for metadata views are called metadata tag sets and only require 2 text files.</p>

<p>create a folder called <code>something.lrdevplugin</code> once you are happy with it it can be renamed <code>something.lrplugin</code></p>

<p>Create a file called Info.lua and Tagset.lua</p>

<p>Info.lua:</p>

<pre><code>return {
  LrSdkVersion = 5.0,
  LrSdkMinimumVersion = 5.0,
  LrToolkitIdentifier = ’sample.metadata',
  LrPluginName = LOC "$$$/CustomMetadata/PluginName=Example View",
  LrMetadataTagsetFactory = ‘Tagset.lua',
}
</code></pre>

<p>Tagset.lua</p>

<pre><code>return {
  title = LOC "$$$/SampleTagset/Title=Example Meta",
  id = ‘Tagset',
  items = {
    {'com.adobe.jobIdentifier', height_in_lines = 1},
    'com.adobe.separator',
    {'com.adobe.title', height_in_lines = 2},
    'com.adobe.separator',
    {'com.adobe.caption', height_in_lines = 6},
  },
}
</code></pre>

<p>The full list of options can be seen from page 63 of the <a href="http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/photoshoplightroom/pdfs/lr5/lightroom-sdk-guide.pdf">lightroom sdk guide</a>.</p>

<p>My <a href="https://github.com/morganp/CopyrightMetadataTagset.lrdevplugin">Copyright view</a> and <a href="https://github.com/morganp/CopyrightMetadataTagset.lrdevplugin">JobID view</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iTerm Exit Fullscreen]]></title>
    <link href="http://lizard-spock.co.uk/blog/tech/iterm-exit-fullscreen/"/>
    <updated>2014-04-08T19:27:00+01:00</updated>
    <id>http://lizard-spock.co.uk/blog/tech/iterm-exit-fullscreen</id>
    <content type="html"><![CDATA[<p><code>⌘-Enter</code> toggles fullscreen in <a href="http://www.iterm2.com/">iTerm</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Fixing Mangled Octopress Tags]]></title>
    <link href="http://lizard-spock.co.uk/blog/tech/fixing-mangled-octopress-tags/"/>
    <updated>2014-04-01T20:59:40+01:00</updated>
    <id>http://lizard-spock.co.uk/blog/tech/fixing-mangled-octopress-tags</id>
    <content type="html"><![CDATA[<p>When creating my blog I have been inconsistent with the tag <code>command line</code>, <code>Command line</code> and
<code>Command Line</code> the case in-sensitvities are not picked up in Octopress generation. To some
extent my <a href="">Downcase plugin</a> hides these differences. The tags page only lists those with full
downcase, but handles all other mixed case tags.</p>

<p>This has lead to some posts dropping off the tag listing, which are just not accessible this way.</p>

<p>The easy fix is to standardise my use of the tag.</p>

<p>First investigate: List posts containing the downcased version:</p>

<pre><code>grep -R '\- command line' *
</code></pre>

<p>Correct all :</p>

<pre><code>find ./source/_posts -type f -print0 | xargs -I{} sed -i '' 's/\- [Cc]ommand [Ll]ine/\- Command Line/g' {}
</code></pre>

<p><code>find</code> outputs all files in folder ‘./‘ Actually had some trouble rerunning this find command so simplified it to :</p>

<pre><code>ls source/_posts/*.markdown | xargs -I{} sed -i '' 's/\- [Cc]ommand [Ll]ine/\- Command Line/g' {}
</code></pre>

<p><strong>xargs</strong> option <code>i{}</code> takes the input argument and repeats it in the following command where the
<code>{}</code> are placed. <code>find</code> has a built in <code>-exec</code> option but using xargs allows the first <code>find</code>
command to be replaced with <code>grep</code> or <code>ls</code> if required.</p>

<p><strong>Sed</strong> options</p>

<ol>
<li><code>g</code> Replace all the instances</li>
<li><code>-i ‘’</code> Edits inplace without appending a new file extension.</li>
</ol>


<p>On a Mavericks the default see does not support case insensitive search,
therefore I have enclosed the first letter of each word with options for lower and upper case.</p>

<p>After performing the updates the tag text is updated to <code>Command Line</code> and the url is
<a href="/tag/command-line/"><code>tag/command-line/</code></a>, which lists all of the tagged posts.</p>
]]></content>
  </entry>
  
</feed>
