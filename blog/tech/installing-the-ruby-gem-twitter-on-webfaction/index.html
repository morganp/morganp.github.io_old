
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Installing the Ruby Gem Twitter on Webfaction - RockPaperScissors</title>
  <meta name="author" content="Morgan Prior">

  
  <meta name="description" content="[Update]
As this is a long post I am putting this update at the top. If you just want to install gems that require a newer version of RubyGems please &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://lizard-spock.co.uk/blog/tech/installing-the-ruby-gem-twitter-on-webfaction">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="RockPaperScissors" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-47010631-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">RockPaperScissors</a></h1>
  
    <h2>LizardSpock</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:lizard-spock.co.uk" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Latest</a></li>
  <li><a href="/blog/archives">All</a></li>
  <li><a href="/tag">Tags</a></li>
  <li><a href="/license">License</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Installing the Ruby Gem Twitter on Webfaction</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-12T10:33:21+01:00" pubdate data-updated="true">Apr 12<span>th</span>, 2010</time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://lizard-spock.co.uk">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>[Update]<br/>
As this is a long post I am putting this update at the top. If you just want to install gems that require a newer version of RubyGems please see the comments at the bottom. I was originally using the wrong gem binary, I should have cd into the webapps directory and found the ruby ee gem was actually uptodate.</p>

<p>[Original]</p>

<p>I have been playing with the <a href="http://twitter.com/amarastech">twitter</a> api via the gem <a href="http://twitter.rubyforge.org/">twitter</a>. This worked fine with my local development version but ran into a few problems when trying to run it on my <a href="http://www.webfaction.com?affiliate=morgy">webfaction</a> production site. The main problem with <a href="http://www.webfaction.com?affiliate=morgy">webfaction</a> is that they have not upgraded the gem to the latest version. To get a version I am allowed to upgrade requires me to install/compile a version of ruby.
Since I was installing it I have decided to go with Ruby 1.9, NB: I still had to upgrade gem afterwards.</p>

<p>This is the how I worked through installing it.</p>

<pre><code>$ gem install twitter
&gt; ERROR:  Error installing twitter:
&gt;      oauth requires RubyGems version &gt; 1.3.1
&gt; Updating class cache with 1488 classes...
</code></pre>

<p>Make list of current gems as will need to reinstall</p>

<pre><code>$ cd ~/bin
$ gem list
</code></pre>

<p>Save output of gems and location and version of ruby</p>

<pre><code>$ ruby --version &gt; old_ruby_webfaction.txt
$ which ruby &gt;&gt; old_ruby_webfaction.txt
$ gem env &gt;&gt; old_ruby_webfaction.txt
$ gem list &gt;&gt; old_ruby_webfaction.txt
</code></pre>

<p>Download ruby tar and unpack</p>

<pre><code>$ wget ftp://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.1-p376.tar.gz    
$ tar -xzf ruby-1.9.1-p376.tar.gz
$ rm ruby-1.9.1-p376.tar.gz
</code></pre>

<p>Compile / Install Ruby to ~/bin (for all the configure options you can run ./configure &mdash;help)</p>

<pre><code>$ cd ruby-1.9.1-p376 
$ ./configure --prefix=$HOME
$ make
$ make test
$ make install
</code></pre>

<p>Check new version of ruby is picked up</p>

<pre><code>$ ruby --version
&gt; ruby 1.9.1p376 (2009-12-07 revision 26041) [i686-linux]
</code></pre>

<p>if not paths are incorrect, this is in my ~/.bashrc</p>

<pre><code>PATH=$HOME/bin:$PATH
export PATH
</code></pre>

<p>Clean up, this directory will be nealry 200 MBs</p>

<pre><code>$ rm -rf ~/bin/ruby-1.9.1-p376
</code></pre>

<p>I mentioned this earlier gem 1.3.1 is still the default with ruby 1.9</p>

<pre><code>$ gem --version 
&gt; 1.3.1
</code></pre>

<p>We will now have permission to upgrade it.</p>

<pre><code>$ gem install rubygems-update
$ gem update --system

$ gem --version
&gt; 1.3.6
</code></pre>

<p>Now back to the original problem installing the twitter gem</p>

<pre><code>$ gem install twitter
</code></pre>

<p>Seems to be working.</p>

<p>Now review old_ruby_webfaction.txt</p>

<pre><code>$ cd ~/bin
$ cat old_ruby_webfaction.txt
</code></pre>

<p>Install all the gems you require (gem install x)</p>

<p>Once you have the site up and running on ruby 1.9 you may wish to remove the gems from the old location to save disk space.
For me the default location of gems was ~/.gem/ruby/1.8 but the command gem env should have saved it in to your old_ruby_webfaction.txt.</p>

<p>Since this install of ruby is entirely writeable by you the default location is probably being used for me this is &lsquo;~/lib/ruby/gems/1.9.1&rsquo; but again gem env should tell you the default location.</p>

<p>Passenger is the web service that runs Sinatra and Rails applications, we now need it to use our version of ruby.</p>

<pre><code>$ pwd
/home/username/webapps/passenger/gems/bin
$ ll

lrwxrwxrwx  1 morgy morgy  30 Mar 13 12:37 erb -&gt; /usr/local/ruby1.8.7ee/bin/erb
lrwxrwxrwx  1 morgy morgy  30 Mar 13 12:37 gem -&gt; /usr/local/ruby1.8.7ee/bin/gem
lrwxrwxrwx  1 morgy morgy  30 Mar 13 12:37 irb -&gt; /usr/local/ruby1.8.7ee/bin/irb
-rwxr-xr-x+ 1 morgy morgy 409 Mar 13 12:37 passenger-config
-rwxr-xr-x+ 1 morgy morgy 425 Mar 13 12:37 passenger-install-apache2-module
-rwxr-xr-x+ 1 morgy morgy 423 Mar 13 12:37 passenger-install-nginx-module
-rwxr-xr-x+ 1 morgy morgy 419 Mar 13 12:37 passenger-make-enterprisey
-rwxr-xr-x+ 1 morgy morgy 415 Mar 13 12:37 passenger-memory-stats
-rwxr-xr-x+ 1 morgy morgy 415 Mar 13 12:37 passenger-spawn-server
-rwxr-xr-x+ 1 morgy morgy 409 Mar 13 12:37 passenger-status
-rwxr-xr-x+ 1 morgy morgy 414 Mar 13 12:37 passenger-stress-test
-rwxr-xr-x+ 1 morgy morgy 384 Mar 13 12:36 rackup
-rwxr-xr-x+ 1 morgy morgy 382 Mar 13 12:36 rake
lrwxrwxrwx  1 morgy morgy  31 Mar 13 12:37 rdoc -&gt; /usr/local/ruby1.8.7ee/bin/rdoc
lrwxrwxrwx  1 morgy morgy  38 Mar 13 12:37 ree-version -&gt; /usr/local/ruby1.8.7ee/bin/ree-version
-rwxr-xr-x+ 1 morgy morgy  92 Mar 13 12:37 restart
lrwxrwxrwx  1 morgy morgy  29 Mar 13 12:37 ri -&gt; /usr/local/ruby1.8.7ee/bin/ri
lrwxrwxrwx  1 morgy morgy  31 Mar 13 12:37 ruby -&gt; /usr/local/ruby1.8.7ee/bin/ruby
-rwxr-xr-x+ 1 morgy morgy 144 Mar 13 12:37 start
-rwxr-xr-x+ 1 morgy morgy 130 Mar 13 12:37 stop
lrwxrwxrwx  1 morgy morgy  33 Mar 13 12:37 testrb -&gt; /usr/local/ruby1.8.7ee/bin/testrb
</code></pre>

<p>Now implement the move to the new version of ruby with the new gems</p>

<pre><code>$ mv erb erb_old
$ ln -s /home/`whoami`/bin/erb erb
$ mv gem gem_old
$ ln -s /home/`whoami`/bin/gem gem
$ mv irb irb_old
$ ln -s /home/`whoami`/bin/irb irb
$ mv rdoc rdoc_old 
$ ln -s /home/`whoami`/bin/rdoc rdoc
$ mv ri ri_old
$ ln -s /home/`whoami`/bin/ri ri
$ mv ruby ruby_old
$ ln -s /home/`whoami`/bin/ruby ruby 
$ mv testrb testrb_old
$ ln -s /home/`whoami`/bin/testrb testrb
</code></pre>

<p>Restart server</p>

<pre><code>$ ~/webapps/passenger/restart
</code></pre>

<p>Deploy you web app using twitter gam and everything should be working!</p>

<h1>Summary</h1>

<p>Install local Ruby 1.9<br/>
Upgrade new gem from 1.3.1 to 1.3.6<br/>
Install required gems<br/>
Change Ruby/Gem version used by Passenger for Sinatra and Rails Web apps</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Morgan Prior</span></span>

      








  


<time datetime="2010-04-12T10:33:21+01:00" pubdate data-updated="true">Apr 12<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/blog/tech/'>Tech</a>
  
</span>


      

<span class="tags">
  
    <a class='tag' href='/tag/gem/'>Gem</a>, <a class='tag' href='/tag/programming/'>Programming</a>, <a class='tag' href='/tag/ruby/'>Ruby</a>, <a class='tag' href='/tag/twitter/'>Twitter</a>, <a class='tag' href='/tag/webfaction/'>WebFaction</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://lizard-spock.co.uk/blog/tech/installing-the-ruby-gem-twitter-on-webfaction/" data-via="" data-counturl="http://lizard-spock.co.uk/blog/tech/installing-the-ruby-gem-twitter-on-webfaction/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/tech/gem-install-with-out-the-docs/" title="Previous Post: gem install with out the docs">&laquo; gem install with out the docs</a>
      
      
        <a class="basic-alignment right" href="/blog/tech/ruby-nil-tests-fail-you-really-want-/" title="Next Post: Ruby .nil? tests fail ? you really want ||=">Ruby .nil? tests fail ? you really want ||= &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/cooking'>Cooking (12)</a></li><li><a href='/blog/engineering'>Engineering (37)</a></li><li><a href='/blog/garden'>Garden (14)</a></li><li><a href='/blog/home'>Home (5)</a></li><li><a href='/blog/outdoor'>Outdoor (1)</a></li><li><a href='/blog/photography'>Photography (37)</a></li><li><a href='/blog/tech'>Tech (243)</a></li></ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/tech/vim-macro/">Vim: Macro</a>
      </li>
    
      <li class="post">
        <a href="/blog/tech/find-your-ruby-gems-path/">Find Your Ruby Gems Path</a>
      </li>
    
      <li class="post">
        <a href="/blog/cooking/bread-doves-gluten-free/">Bread: Doves Gluten Free</a>
      </li>
    
      <li class="post">
        <a href="/blog/engineering/verilog-calculate-primes/">Verilog: Calculate Primes</a>
      </li>
    
      <li class="post">
        <a href="/blog/tech/tcsh-remove-trailing-slash/">Tcsh Remove Trailing /</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/morganp">@morganp</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'morganp',
            count: 1,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Morgan Prior -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'morganpgithubio';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://lizard-spock.co.uk/blog/tech/installing-the-ruby-gem-twitter-on-webfaction/';
        var disqus_url = 'http://lizard-spock.co.uk/blog/tech/installing-the-ruby-gem-twitter-on-webfaction/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
